###Copy SQL Server backup files
```
#!/bin/bash
PATH=/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
export PATH
count=`df -h | grep $2 | wc -l`
remotedir=/mnt/smb-$2
localdir=/home/data/$2-bak
if [ $count -eq 0 ]; then
	mount -t cifs //"$1" $remotedir -o username=username,password=password,codepage=cp936 &> /dev/null
        if [ $? -ne 0 ]; then
               echo "failed to connect $2 sql server" > /home/scripts/logs/$2_`date +%Y%m%d`.log
               exit 1
        fi
fi
find $remotedir -type f -mmin -250 -exec cp {} $localdir \;
umount $remotedir
exit 0
```
###Delete Xinmin newsletter delivery temp files
```
#!/bin/bash
PATH=/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
export PATH
today=`date +%Y%m%d`
delday=`date -d "40 days ago" +%Y%m%d`
logdir1=/opt/scripts/logs/xmdelivery/$today.log
logdir2=/opt/scripts/logs/xmdelivery/"$today"_error.log
xmdir=/mnt/xmdelivery
count=`df -h | grep xmdelivery | wc -l`
if [ $count -eq 0 ]; then
	mount -t cifs //172.17.107.110/data $xmdir -o username=username,password=password,codepage=cp936 2>> $logdir2
	if [ $? -ne 0 ]; then
		echo "无法访问分稿服务器" >> $logdir2
		exit 1
	fi
fi
dir1=(新华社图片 新华社文字)
dir2=(entity name name_bak)
for(( i=0; i<2; i++ ))
do
	for(( j=0; j<3; j++ ))
	do
		rm -rvf $xmdir/${dir1[i]}/${dir2[j]}/$delday >> $logdir1 2>> $logdir2
	done
done
umount $xmdir
if [ ! -s $logdir2 ]; then
	rm -f $logdir2
fi
exit 0
```
###Delete Wenhui newsletter delivery temp files
```
#!/bin/bash
PATH=/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
export PATH
today=`date +%Y%m%d`
logdir1=/opt/scripts/logs/whdelivery/$today.log
logdir2=/opt/scripts/logs/whdelivery/"$today"_error.log
whdir=/mnt/whdelivery
delday=`date -d "37 days ago" +%Y%m%d`
count=`df -h | grep whdelivery | wc -l`
if [ $count -eq 0 ]; then
	mount -t cifs //172.17.107.106/data $whdir -o username=username,password=password,codepage=cp936 2>> $logdir2
	
	if [ $? -ne 0 ]; then
		echo "无法访问分稿服务器" >> $logdir2
		exit 1
	fi

fi
dir1=(photo text)
dir2=(entity name name_bak)
for(( i=0; i<2; i++ ))
do
	for(( j=0; j<3; j++ ))
	do
		rm -rvf $whdir/${dir1[i]}/${dir2[j]}/$delday >> $logdir1 2>> $logdir2
	done
done
umount $whdir
if [ ! -s $logdir2 ]; then
	rm -f $logdir2
fi
exit 0
```
###Delete Xinmin FTP history files
```
#!/bin/bash
PATH=/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
export PATH
abroad_catalog=(shangbao 奥地利奥华总会 布达佩斯周报 加西周末 捷克华商导报 欧华报 葡华报 希腊中希时报 新民美国 新西兰信报 \
爱华杂志\(日本版\) 澳大利亚华夏周报 华侨新天地\(荷兰\) 加中时报 拉美侨声 欧洲联合周报 泰国星暹日报 西非统一商报 新欧侨报 印尼讯报 \
北欧时报 华盛顿中文邮报)
count=`df -h | grep hwb | wc -l`
today=`date +%Y%m%d`
logdir1=/opt/scripts/logs/ftp_hwb/$today.log
logdir2=/opt/scripts/logs/ftp_hwb/"$today"_error.log
ftpdir=/mnt/ftp_hwb
if [ $count -eq 0 ]; then
	curlftpfs -o codepage=GBK ftp://username:password@serverip:port $ftpdir 2>> $logdir2
	if [ $? -ne 0 ]; then
		echo "cannot visit ftpserver" >> $logdir2
		exit 1
	fi
fi
for((i=0;i<22;i++))
do
	find $ftpdir/${abroad_catalog[i]} -type d -mtime +249 | xargs rm -rvf >> $logdir1 
done
umount $ftpdir
if [ ! -s $logdir2 ]; then
	rm -f $logdir2
fi
exit 0
```
###Delete Press FTP history files
```
#!/bin/bash
PATH=/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
export PATH
today=`date +%Y%m%d`
logdir1=/opt/scripts/logs/ftp_gn/$today.log
logdir2=/opt/scripts/logs/ftp_gn/"$today"_error.log
ftpdir=/mnt/ftp_gn
date1=`date -d "85 days ago" +%Y%m%d`
date2=`date -d "145 days ago" +%Y%m%d`
count=`df -h | grep gn | wc -l`
if [ $count -eq 0 ]; then
curlftpfs -o codepage=GBK ftp://username:password@serverip:port $ftpdir 2>> $logdir2

	if [ $? -ne 0 ]; then
	echo "无法访问FTP服务器" >> $logdir2
	exit 1
	fi

fi
rm -rvf $ftpdir/慧科讯业/whb/wh$date1 >> $logdir1 2>> $logdir2
rm -rvf $ftpdir/慧科讯业/xmwb/xm$date1 >> $logdir1 2>> $logdir2
rm -rvf $ftpdir/xmwb/上海地区版/$date2 >> $logdir1 2>> $logdir2
rm -rvf $ftpdir/xmwb/外地版/$date2 >> $logdir1 2>> $logdir2
rm -rvf $ftpdir/whb/wh$date2 >> $logdir1 2>> $logdir2
rm -rvf $ftpdir/whb/上海地区版/wh$date2 >> $logdir1 2>> $logdir2
umount $ftpdir
if [ ! -s $logdir2 ];then
	rm -f $logdir2
fi
exit 0
```
###Delete Press FTP history files(Xinmin Weekly)
```
#!/bin/bash
PATH=/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
export PATH
ftpdir=/mnt/ftp_xmzk
today=`date +%Y%m%d`
logdir1=/opt/scripts/logs/ftp_xmzk/$today.log
logdir2=/opt/scripts/logs/ftp_xmzk/"$today"_error.log
count=`df -h | grep xmzk | wc -l`
if [ $count -eq 0 ]; then
	curlftpfs -o codepage=GBK ftp://username:password@serverip:port $ftpdir 2>> $logdir2
	if [ $? -ne 0 ]; then
		echo "cannot visit ftp server" >> $logdir2
		exit 1
	fi
fi
find $ftpdir/xmzkr -type d -name "*第??期*" -mtime +251 | xargs rm -rvf >> $logdir1
find $ftpdir/xmzkr/新民周刊往期电子小文件 -type f -mtime +591 -exec rm -rvf {} \;>> $logdir1 2>> $logdir2
umount $ftpdir
if [ ! -s $logdir2 ]; then
	rm -f $logdir2
fi
exit 0
```
###Backup history press files
```
#!/bin/bash
copydir=(ARTICLE COMPOSE LIBRARY)
copyyear=`date -d "11 months ago" +%Y`
copymonth=`date -d "11 months ago" +%Y%m`*
case "$1" in
    "WHB")
        copypaper="wh"
        server="172.17.107.88"
        ;;
    "XMWB")
        copypaper="xm"
        server="172.17.107.91"
        ;;
    "WXB")
        copypaper="wx"
        server="172.17.107.88"
        ;;
     "DSZB")
        copypaper="ds"
        server="172.17.107.88"
        ;;
      *)
        echo "Please input WHB/XMWB/WXB/DSZB"
        exit 1
        ;;

esac
function mounts()
{
    count=`df -h | grep "$1" | wc -l`
    if [ $count -eq 0 ]; then
        mount -t cifs //"$2" /mnt/"$1" -o username="$3",password="$4",codepage=cp936
        if [ $? -ne 0 ]; then
            echo "failed to connet $2" > /home/scripts/logs/$1_`date +%Y%m%d`.log
            exit 1
        fi
    fi
}
mounts "$copypaper" "$server/fzpaper" "username" "password"
mounts "share1" "172.17.107.176/share1" "username" "password"
if [ ! -d "/mnt/share1/$copypaper$copyyear" ]; then
    mkdir /mnt/share1/$copypaper$copyyear
    for((i=0; i<3; i++))
    do
        mkdir /mnt/share1/$copypaper$copyyear/${copydir[i]}
    done
fi
for((i=0; i<3; i++))
do
    cp -r /mnt/$copypaper/$1/${copydir[i]}/$copymonth /mnt/share1/$copypaper$copyyear/${copydir[i]}
done
umount /mnt/$copypaper
umount /mnt/share1
exit 0
```
###SOAP wsdl web service
```
#!/bin/bash
cityname=$1

cat > /tmp/request.xml << EOF
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <getWeatherbyCityName xmlns="http://WebXml.com.cn/">
      <theCityName>$cityname</theCityName>
    </getWeatherbyCityName>
  </soap:Body>
</soap:Envelope>
EOF

curl -s -H "Content-Type: text/xml; charset=utf-8" \
        -H 'SOAPAction: "http://WebXml.com.cn/getWeatherbyCityName"' \
        -d  @/tmp/request.xml \
        -X POST http://www.webxml.com.cn/WebServices/WeatherWebService.asmx \
        > /tmp/weatherapi.log

exit 0
```
###Check newsletters by xinhua news agency
```
#!/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
export PATH
today=`date +%Y%m%d`
case "$1" in
    "107")
    server="172.25.52.107"
     ;;
    "106")
    server="172.25.56.106"
     ;;
    "xm")
    server="172.17.107.110"
     ;;
    "wh")
    server="172.17.107.106"
     ;;
    *)
    echo "-2"
    exit 1
     ;;
esac

local=/mnt/xhs_"$1"
chkconn=`df -h | grep "$local" | wc -l`
if [ $chkconn -eq 0 ]; then
        mount -t cifs //"$server"/data "$local" -o username=username,password=password,codepage=cp936 &> /dev/null
        if [ $? -ne 0 ]; then
            echo "-1"
            exit 1
        fi
fi

if [ "$2" == "num_photo" ]; then
    dir="$local/cnml/input/photo/$today"
    if [ -d $dir ]; then
        count=`ls -l "$local"/cnml/input/photo/"$today" | grep "^-.*[jpg|JPG|cdr|ai]$" | wc -l`
        echo "$count"
        umount "$local"
        exit 0
    else
        echo "0"
        umount "$local"
        exit 0
    fi  
fi

case "$server" in
    172.25.56.106|172.25.52.107)
    dir="$local/cnml/input/$2"
     ;;
    172.17.107.110|172.17.107.106)
    dir="$local/$2/name_bak"
     ;;
    *)
    echo "-3"
    exit 1
     ;;
esac

if [ -d "$dir"/"$today" ]; then
    count=`ls -l "$dir"/"$today" | grep "^-.*xml$" | wc -l`
    echo "$count"
    umount "$local"
    exit 0
else
    echo "0"
    umount "$local"
    exit 0
fi
```
###Create folder by date
```
#/bin/bash
#Create directory by date
DATE=$(date +%Y%m%d)
DIR_PRI="/home/pic/primary/$DATE"
DIR_SEC="/home/pic/secondary/$DATE"

create_folder(){
FOLDER=$1
if [ ! -d $FOLDER ]; then
    mkdir $FOLDER
fi
}

create_folder $DIR_PRI
create_folder $DIR_SEC

exit 0
```