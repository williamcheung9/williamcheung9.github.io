### Install Tomcat
  # cd /usr/local/src  
  # tar -zxvf jdk-8u201-linux-x64.tar.gz  
  # mv jdk1.8.0_201/ ..  
  # tar -zxvf apache-tomcat-7.0.94.tar.gz  
  # mv apache-tomcat-7.0.94 ..  
  # ln -s jdk1.8.0_201 jdk  
  # ln -s apache-tomcat-7.0.94 tomcat  
  # vi /etc/profile
```
export JAVA_HOME=/usr/local/jdk
export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin
```
  # source /etc/profile  
  # java -version  
  # /usr/local/tomcat/bin/startup.sh
### Redirect Tomcat home page
  # vi /usr/local/tomcat/webapps/ROOT/index.jsp
```
<%response.sendRedirect("../newsedit/login.jsp");%>
```
### Replace default tomcat ico
  /usr/local/tomcat/webapps/ROOT/favicon.ico
### Configuration of server.xml
  **connect Microsoft SQL Server**  
  # vi /usr/local/tomcat/conf/server.xml
```
<Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false">

<Context crossContext="true" debug="0" docBase="/var/new-web" path="/newsedit" reloadable="false">
	<Resource name="jdbc/E5NEW" type="javax.sql.DataSource"
		driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
		url="jdbc:sqlserver://172.17.107.125:1433;databasename=newseditv2"
		username="username"
		password="password"
 
		maxIdle="20"
		maxActive="25"
		maxWait="10000"
	/>

	<Resource name="jdbc/ADV" type="javax.sql.DataSource"
		driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
		url="jdbc:sqlserver://172.25.24.7:1433;databasename=xmcm"
		username="username"
		password="password"
 
		maxIdle="5"
		maxActive="8"
		maxWait="10000"
	/>
</Context>

</Host>
``` 
  **disable local host access log**  
  # vi /usr/local/tomcat/conf/server.xml  
  comment out  
```
<Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
       prefix="localhost_access_log." suffix=".txt"
       pattern="%h %l %u %t &quot;%r&quot; %s %b" />
```
  **support utf-8 uriencoding**  
  # vi /usr/local/tomcat/conf/server.xml
```
<Connector port="81" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" 
	       URIEncoding="UTF-8" />
```
### Logrotate Catalina.out
  # vi /etc/logrotate.d/tomcat
```
/usr/local/tomcat/logs/catalina.out {
daily
rotate 15
missingok
dateext
nocompress
notifempty
copytruncate
}
```
  # logrotate -d /etc/logrotate.d/tomcat  
  # cat /var/lib/logrotate/logrotate.status  
**Note**:Logfiles and directory should have selinux context "var_log_t"  
  # chcon -t var_log_t /usr/local/tomcat/logs  
  # chcon -t var_log_t /usr/local/tomcat/logs/catalina.out
### Start tomcat on system boot
  # vi /etc/rc.d/rc.local
```
export JAVA_HOME=/usr/local/jdk
/usr/local/tomcat/bin/startup.sh
```
Add rc.local execute permission  
 # chmod 744 /etc/rc.d/rc.local
### Enabling JMX remote
  # vi /usr/local/tomcat/bin/catalina.sh
```
# Enabling JMX Remote
CATALINA_OPTS="$CATALINA_OPTS
-Dcom.sun.management.jmxremote
-Dcom.sun.management.jmxremote.authenticate=false
-Dcom.sun.management.jmxremote.ssl=false
-Djava.rmi.server.hostname=192.168.152.111
-Dcom.sun.management.jmxremote.port=9102"*
```
**Note**:Disable tomcat server firewall,use jdk/bin/jconsole.exe to test connection
